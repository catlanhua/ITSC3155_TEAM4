<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="QnA App">
    <title>QnA - View your Post</title>
    <!-- styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
</head>

<header>
    <nav>
        <div class="navigation">
            <a href="{{ url_for('index') }}"> Home</a>
            <a href="{{ url_for('get_posts') }}"> Profile </a>
            <a href="{{ url_for('new_post') }}"> New Post </a>
            <a href="{{ url_for('all_posts') }}"> All Posts </a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </nav>
</header>
<br>
<br>
<br>
<hr>

<body>
<h1>Welcome {{user.name}} to the QnA App!</h1>
<h1>Post Details</h1>

<table>
    <tr>
        <th>Title</th>
        <th>Text</th>
        <th>Date</th>
    </tr>
    <tr>
        <td>{{ post.title }}</td>
        <td>{{ post.text }}</td>
        <td>{{ post.date }}</td>
    </tr>

</table>

<button id="formButton" onclick="toggle()">Reply</button>

<div id="replyDiv">
    <form id="form1" action="{{ url_for('reply', post_id=post.id) }}" method="post">
        <div class="formwrapper">
            <h2 class="title">Add a reply</h2>
            <div class="form-field">
                {{ form.reply }}
            </div>
            {{ form.submit }}
        </div>
    </form>
</div>
{% if post.reply %}
{% if post.reply|length > 0 %}
<h2>Replies</h2>
<ul>
    {% for re in post.reply %}
    <p>Author</p>
    <div class="box">
        <div class="content">
            <p>{{ re.content }}</p>
        </div>
        <span class="time-right">{{ re.date_posted }}</span>
    </div>
    {% endfor %}
</ul>
{% endif %}
{% endif %}
<!-- script -->

<script>
function toggle() {
  var x = document.getElementById("replyDiv");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

</script>
<form action="{{ url_for('report', post_id=post.id) }}" method="post">
    <input type="submit" value="Report Post">
</form>
</body>

<footer id="footer">
    <hr>
    <h4> Freethinkers Copyright 2021</h4>
</footer>
</html>